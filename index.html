<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Name Form</title>
</head>
<body>
  <p>hello aiaa 5028 students</p>
  <form id="name-form">
    <label for="name-input">Enter your name:</label>
    <input id="name-input" type="text" />
    <button type="submit">Submit</button>
  </form>

  <script>
    // Get the name form
    let nameForm = document.querySelector('#name-form');

    // Set up the submit event handler for the name form
    nameForm.addEventListener('submit', function(event) {
      // Prevent the form from being submitted
      event.preventDefault();

      // Get the name input
      let nameInput = document.querySelector('#name-input');

      // Get the current contents of the names file
      fetch('https://api.github.com/repos/stellaludai/stellaludai.github.io/contents/names.txt')
        .then(response => {
          if (response.ok) {
            return response.json();
          } else {
            console.error('Failed to get file contents from repository');
          }
        })
        .then(file => {
          // Append the user's name to the contents of the file
          let newContents = file.content + '\n' + nameInput.value;

          // Set up the request parameters
          let params = {
            message: 'Appending name to names.txt file', // The commit message
            content: btoa(newContents), // The updated file contents, encoded as base64
            sha: file.sha // The SHA of the current file version
          };

          // Send a request to the GitHub API to update the file
          fetch('https://api.github.com/repos/stellaludai/stellaludai.github.io/contents/names.txt', {
            method: 'PUT',
            headers: {
              'Authorization': `Bearer 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`, // Replace <TOKEN> with your personal access token
             },
            body: JSON.stringify(params)
          })
            .then(response => {
              if (response.ok) {
                console.log('File was successfully updated in repository');
              } else {
                console.error('Failed to update file in repository');
              }
            })
            .catch(error => {
              console.error(error);
            });
        });
    });
  </script>
